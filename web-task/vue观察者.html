<!DOCTYPE html>
<html>

<head>
    <title>观察者实现</title>
    <style>

    </style>
</head>

<body>

</body>
<script type="text/javascript">
    let data = {
        name: 'ssf'
    };

    observe(data);

    data.name= 'wtt';
    function observe(data) {
        if (!data || typeof data !== 'object') {
            return;
        }
        Object.keys(data).forEach(key => {
            defineReactive(data, key, data[key]);
        });
    }


    function defineReactive(data, key, val) {
        observe(val);
        Object.defineProperty(data, key, {
            enumerable: true,
            configurable: true,
            get: function () {
                return val;
            },
            set: function (newVal) {
                val = newVal;
                console.log('哈哈哈，监听到值变化了 ', val, ' --> ', newVal);
            },
        })
    }


</script>

</html>